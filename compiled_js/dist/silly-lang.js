(()=>{"use strict";var e={301:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Command=t.Token=t.TokenTypes=void 0,function(e){e[e.ANY=0]="ANY",e[e.STR=1]="STR",e[e.INT=2]="INT"}(r||(t.TokenTypes=r={}));var n=function(){function e(e,t){void 0===t&&(t=r.ANY),this.value="",this.type=0,this.value=e,this.type=t}return e.prototype.log=function(e){void 0===e&&(e=""),console.log("".concat(e).concat(this.value," (").concat(this.type,")"))},e}();t.Token=n;var a=function(){function e(e,t){void 0===t&&(t=[]),this.name=e,this.args=t}return e.prototype.log=function(){console.log("".concat(this.name,": "));for(var e=0,t=this.args;e<t.length;e++)t[e].log("    ");console.log("")},e}();t.Command=a},326:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.END_COMMAND=t.MULTI_L_COMMENT=t.LINE_COMMENT=t.QUOTE=t.NUM_PREFIX=void 0,t.strToNum=function(e){return e.slice(t.NUM_PREFIX.length)},t.tokenize=function(e,r,i){void 0===r&&(r=t.QUOTE),void 0===i&&(i=t.NUM_PREFIX);for(var c=[],u="",l=n.TokenTypes.ANY,g=!1,h=function(e,r,n){void 0===r&&(r=t.LINE_COMMENT),void 0===n&&(n=t.MULTI_L_COMMENT);for(var o="",i=!1,c=!1,u=0;u<e.length;u++)c?"\n"===e[u]&&(c=!1):i?s(e.toLowerCase(),n[1],u)&&(i=!1,u+=n[1].length-1):s(e.toLowerCase(),r,u)?(c=!0,u+=r.length-1):s(e.toLowerCase(),n[0],u)?(i=!0,u+=n[0].length-1):o+=e[u];return i&&console.log(a('Warning: multi line comment never closed. Check for missing "'.concat(t.MULTI_L_COMMENT[1],'"'),"33")),o}(e),p=0,f=h;p<f.length;p++){var v=f[p];g?v==r?(g=!1,c.push(new n.Token(u,l)),u="",l=n.TokenTypes.ANY):u+=v:v==r?(g=!0,l=n.TokenTypes.STR):o(v)?""!==u.trim()&&(s(u,i,0)&&(l=n.TokenTypes.INT),c.push(new n.Token(u.trim().toLowerCase(),l)),u="",l=n.TokenTypes.ANY):u+=v}return""!==u.trim()&&c.push(new n.Token(u.trim().toLowerCase(),l)),c},t.parse=function(e,r){void 0===r&&(r=t.END_COMMAND);for(var o=[],s=null,i=0,c=e;i<c.length;i++){var u=c[i];s?u.value==r&&u.type==n.TokenTypes.ANY?(s&&o.push(s),s=null):s&&s.args.push(u):s=new n.Command(u.value)}return s&&console.log(a('Warning: last command is not closed. Check for missing "'.concat(t.END_COMMAND,'".'),"33")),o};var n=r(301);function a(e,t){return"[".concat(t,"m").concat(e,"[0m")}function o(e){return" "===e[0]||"\t"===e[0]||"\n"===e[0]}function s(e,t,r){for(var n=!0,a=0;a<t.length;a++)if(e[a+r]!==t[a]){n=!1;break}return n}t.NUM_PREFIX="#",t.QUOTE='"',t.LINE_COMMENT=">w<",t.MULTI_L_COMMENT=[">o<",">.<"],t.END_COMMAND="~"},331:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function i(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Interpreter=void 0;var o=r(353),s=r(301),i=r(326),c={declare:":3",assign:":p",label:"u.u",concat:":v",add:":d",sub:":c",mult:":}",div:":{",inc:"^.^",dec:"t.t",in:"owo",out:"uwu",error:"xwx",jmp:"o.o",jmp_eq:":)",jmp_neq:":(",jmp_eq_notype:">:)",jmp_neq_notype:">:(",jmp_gt:":]",jmp_lt:":[",jmp_eq_gt:">:]",jmp_eq_lt:">:[",halt:"x.x"},u=function(){function e(){this.varMap={_endl:"\n",_tab:"\t",_nan:NaN,_empty_str:"",_prog_counter:0,":>":1,_true:1,":<":0,_false:0,twt:0}}return e.prototype.logerror=function(e,t){void 0===e&&(e="No further information provided."),void 0===t&&(t="Error"),console.log("[1m[31m"+"".concat(t," in Command ").concat(this.varMap._prog_counter,": ")+"[0m[31m"+e+"[0m")},e.prototype.logcode=function(e){e.forEach((function(e){return e.log()}))},e.prototype.concatTokens=function(e,t){void 0===t&&(t=0);for(var r="",n=t;n<e.length;n++)r+=this.getTokenValue(e[n]);return r},e.prototype.declareVar=function(e,t){return e in this.varMap?(this.logerror("Variable ".concat(e," already exists")),!1):(this.varMap[e]=t,!0)},e.prototype.assignVar=function(e,t){return e in this.varMap?(this.varMap[e]=t,!0):(this.logerror('Variable "'.concat(e,'" not found.')),!1)},e.prototype.getTokenValue=function(e){switch(e.type){case s.TokenTypes.ANY:if(e.value in this.varMap)return this.varMap[e.value];this.logerror('Variable "'.concat(e.value,'" not found.'));break;case s.TokenTypes.STR:return e.value;case s.TokenTypes.INT:return(0,i.strToNum)(e.value)}return""},e.prototype.getName=function(e){return e.type==s.TokenTypes.ANY?e.value:(this.logerror("".concat(e.value," is not a valid variable name.")),"")},e.prototype.getKeyword=function(e){return e.type==s.TokenTypes.ANY&&e.value in c?e.value:(this.logerror('"'.concat(e.value,'" is not a valid keyword name.')),"")},e.prototype.getString=function(e){switch(e.type){case s.TokenTypes.ANY:if("string"==typeof this.varMap[e.value])return this.varMap[e.value];this.logerror("".concat(e.value," is not a string."));break;case s.TokenTypes.STR:return e.value;case s.TokenTypes.INT:this.logerror("".concat(e.value," is not a string."))}return""},e.prototype.getNum=function(e){switch(e.type){case s.TokenTypes.ANY:var t=this.varMap[e.value];if("number"==typeof t)return t;if("string"==typeof t){var r=parseFloat(t);if(!isNaN(r))return r;this.logerror("".concat(e.value," is not a number."))}break;case s.TokenTypes.STR:this.logerror("".concat(e.value," is not a number."));break;case s.TokenTypes.INT:return(0,i.strToNum)(e.value)}return NaN},e.prototype.checkArgs=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=t.includes(e.args.length);return n||this.logerror('Invalid argument count for "'.concat(e.name,'": ').concat(e.args.length,". Allowed counts: ").concat(t.join(", "))),n},e.prototype.atLeastArgs=function(e,t){var r=e.args.length>=t;return r||this.logerror('Invalid argument count for "'.concat(e.name,'": ').concat(e.args.length,". Command must have at least ").concat(t," arguments")),r},e.prototype.execute=function(e){return n(this,void 0,void 0,(function(){var t,r,n;return a(this,(function(a){switch(a.label){case 0:console.log(""),t=0,a.label=1;case 1:if(!(t<e.length))return[3,19];if((r=e[t]).name===c.halt)return[3,19];switch(this.varMap._prog_counter=t,this.varMap.twt=Math.random(),r.name){case c.in:return[3,2];case c.out:return[3,4];case c.error:return[3,5];case c.declare:return[3,6];case c.assign:return[3,7];case c.label:return[3,8];case c.concat:return[3,9];case c.add:return[3,10];case c.sub:return[3,11];case c.mult:return[3,12];case c.div:return[3,13];case c.inc:case c.mult:return[3,14];case c.dec:return[3,15];case c.jmp:return[3,16]}return[3,17];case 2:return this.atLeastArgs(r,2)?[4,o.ask(this.concatTokens(r.args,1))]:[3,18];case 3:return n=a.sent(),this.assignVar(this.getName(r.args[0]),n),[3,18];case 4:return console.log(this.concatTokens(r.args)),[3,18];case 5:return this.logerror(this.concatTokens(r.args),"Runtime Error"),[3,18];case 6:return this.checkArgs(r,1,2)?(2==r.args.length?this.declareVar(this.getName(r.args[0]),this.getTokenValue(r.args[1])):this.declareVar(this.getName(r.args[0]),NaN),[3,18]):[3,18];case 7:return this.checkArgs(r,2)?(this.assignVar(this.getName(r.args[0]),this.getTokenValue(r.args[1])),[3,18]):[3,18];case 8:return this.checkArgs(r,1)?(this.declareVar(this.getName(r.args[0]),this.varMap._prog_counter),[3,18]):[3,18];case 9:return this.atLeastArgs(r,2)?(this.assignVar(this.getName(r.args[0]),this.getString(r.args[0]).concat(this.concatTokens(r.args,1))),[3,18]):[3,18];case 10:return this.checkArgs(r,2)?(this.assignVar(this.getName(r.args[0]),this.getNum(r.args[0])+this.getNum(r.args[1])),[3,18]):[3,18];case 11:return this.checkArgs(r,2)?(this.assignVar(this.getName(r.args[0]),this.getNum(r.args[0])-this.getNum(r.args[1])),[3,18]):[3,18];case 12:return this.checkArgs(r,2)?(this.assignVar(this.getName(r.args[0]),this.getNum(r.args[0])*this.getNum(r.args[1])),[3,18]):[3,18];case 13:return this.checkArgs(r,2)?(this.assignVar(this.getName(r.args[0]),this.getNum(r.args[0])/this.getNum(r.args[1])),[3,18]):[3,18];case 14:return this.checkArgs(r,1)?(this.assignVar(this.getName(r.args[0]),this.getNum(r.args[0])+1),[3,18]):[3,18];case 15:return this.checkArgs(r,1)?(this.assignVar(this.getName(r.args[0]),this.getNum(r.args[0])-1),[3,18]):[3,18];case 16:if(!this.checkArgs(r,1,4))return[3,18];if(1==r.args.length)t=this.getNum(r.args[0]);else switch(this.getKeyword(r.args[2])){case c.jmp_eq:this.getTokenValue(r.args[1])===this.getTokenValue(r.args[2])&&(t=this.getNum(r.args[0]));break;case c.jmp_neq:this.getTokenValue(r.args[1])!==this.getTokenValue(r.args[2])&&(t=this.getNum(r.args[0]));break;case c.jmp_eq_notype:this.getTokenValue(r.args[1])==this.getTokenValue(r.args[2])&&(t=this.getNum(r.args[0]));break;case c.jmp_neq_notype:this.getTokenValue(r.args[1])!=this.getTokenValue(r.args[2])&&(t=this.getNum(r.args[0]));break;case c.jmp_gt:this.getTokenValue(r.args[1])>this.getTokenValue(r.args[2])&&(t=this.getNum(r.args[0]));break;case c.jmp_lt:this.getTokenValue(r.args[1])<this.getTokenValue(r.args[2])&&(t=this.getNum(r.args[0]));break;case c.jmp_eq_gt:this.getTokenValue(r.args[1])>=this.getTokenValue(r.args[2])&&(t=this.getNum(r.args[0]));break;case c.jmp_eq_lt:this.getTokenValue(r.args[1])<=this.getTokenValue(r.args[2])&&(t=this.getNum(r.args[0]));break;default:this.logerror("The keyword ".concat(r.args[2]," is not a valid keyword for a condicional jump."))}return[3,18];case 17:this.logerror('The command "'.concat(r.name,'" does not exit')),a.label=18;case 18:return t++,[3,1];case 19:return o.rl.close(),[2]}}))}))},e}();t.Interpreter=u},353:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.rl=void 0,t.ask=function(e){return new Promise((function(r){t.rl.question(e,(function(e){r(e)}))}))},t.readfile=function(e,t){void 0===t&&(t="utf8");try{return a.readFileSync(e,t)}catch(e){return console.error("Error reading the file: ",e),""}};var n=r(785),a=r(896);t.rl=n.createInterface({input:process.stdin,output:process.stdout})},520:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function i(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(353),s=r(326),i=r(331);!function(){n(this,void 0,void 0,(function(){var e,t,r,n;return a(this,(function(a){switch(a.label){case 0:return[4,o.ask("File name/path: ")];case 1:return e=a.sent(),t=o.readfile(e),r=s.tokenize(t),n=s.parse(r),[4,(new i.Interpreter).execute(n)];case 2:return a.sent(),o.rl.close(),[2]}}))}))}()},785:e=>{e.exports=require("readline")},896:e=>{e.exports=require("fs")}},t={};!function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}(520)})();